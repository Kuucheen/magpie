"use strict";(globalThis.webpackChunkwebsite_docs=globalThis.webpackChunkwebsite_docs||[]).push([[918],{3081(e,r,n){n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"api/errors","title":"Error Handling","description":"Magpie currently returns a mix of JSON-object errors, plain-text auth middleware errors, and JSON string messages on some endpoints.","source":"@site/docs/api/errors.md","sourceDirName":"api","slug":"/api/errors","permalink":"/docs/api/errors","draft":false,"unlisted":false,"editUrl":"https://github.com/Kuucheen/magpie/tree/master/website/docs/docs/api/errors.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"GraphQL API","permalink":"/docs/api/graphql"},"next":{"title":"Deployment","permalink":"/docs/operations/deployment"}}');var i=n(4848),o=n(8453);const t={},l="Error Handling",d={},c=[{value:"JSON object error format",id:"json-object-error-format",level:2},{value:"Plain-text auth errors",id:"plain-text-auth-errors",level:2},{value:"Extended JSON error formats",id:"extended-json-error-formats",level:2},{value:"Endpoint-specific error statuses",id:"endpoint-specific-error-statuses",level:2},{value:"String responses that are not error objects",id:"string-responses-that-are-not-error-objects",level:2}];function a(e){const r={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"error-handling",children:"Error Handling"})}),"\n",(0,i.jsx)(r.p,{children:"Magpie currently returns a mix of JSON-object errors, plain-text auth middleware errors, and JSON string messages on some endpoints."}),"\n",(0,i.jsx)(r.h2,{id:"json-object-error-format",children:"JSON object error format"}),"\n",(0,i.jsx)(r.p,{children:"Most route handlers return:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-json",children:'{"error": "message"}\n'})}),"\n",(0,i.jsxs)(r.p,{children:["This is the default shape from ",(0,i.jsx)(r.code,{children:"writeError(...)"}),"."]}),"\n",(0,i.jsx)(r.h2,{id:"plain-text-auth-errors",children:"Plain-text auth errors"}),"\n",(0,i.jsx)(r.p,{children:"Middleware-based auth checks may return plain-text HTTP errors:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"401 Unauthorized"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"403 Forbidden"})}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"extended-json-error-formats",children:"Extended JSON error formats"}),"\n",(0,i.jsx)(r.p,{children:"Some endpoints return additional metadata:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Blocked global config URLs:","\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"error"}),", ",(0,i.jsx)(r.code,{children:"blocked_websites"}),", ",(0,i.jsx)(r.code,{children:"website_blacklist"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["Blocked scrape-source uploads:","\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"error"}),", ",(0,i.jsx)(r.code,{children:"blocked_sources"}),", ",(0,i.jsx)(r.code,{children:"websiteBlacklist"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["Blocked user judge URLs:","\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"error"}),", ",(0,i.jsx)(r.code,{children:"blocked_websites"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"endpoint-specific-error-statuses",children:"Endpoint-specific error statuses"}),"\n",(0,i.jsx)(r.p,{children:"Common patterns:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"400"}),": invalid payload/params or validation failure"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"401"}),": missing/invalid token"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"403"}),": admin role required"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"404"}),": missing resource"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"409"}),": conflict (for example duplicate rotating proxy name or no alive proxy to rotate)"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"503"}),": rotating-proxy listen port pool exhausted"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"500"}),": internal failure"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"string-responses-that-are-not-error-objects",children:"String responses that are not error objects"}),"\n",(0,i.jsx)(r.p,{children:"Some success/failure informational responses are JSON strings, e.g.:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:'"Deleted 25 proxies."'})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:'"No proxies matched the delete criteria."'})}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"Handle these as text messages, not structured objects."})]})}function h(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453(e,r,n){n.d(r,{R:()=>t,x:()=>l});var s=n(6540);const i={},o=s.createContext(i);function t(e){const r=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(o.Provider,{value:r},e.children)}}}]);