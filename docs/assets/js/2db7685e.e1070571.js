"use strict";(globalThis.webpackChunkwebsite_docs=globalThis.webpackChunkwebsite_docs||[]).push([[544],{2274(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"operations/troubleshooting","title":"Troubleshooting","description":"Old data not decrypting after restart/update","source":"@site/docs/operations/troubleshooting.md","sourceDirName":"operations","slug":"/operations/troubleshooting","permalink":"/docs/operations/troubleshooting","draft":false,"unlisted":false,"editUrl":"https://github.com/Kuucheen/magpie/tree/master/website/docs/docs/operations/troubleshooting.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Security","permalink":"/docs/operations/security"},"next":{"title":"Backup and Recovery","permalink":"/docs/operations/backup-and-recovery"}}');var r=t(4848),o=t(8453);const i={},c="Troubleshooting",d={},l=[{value:"Old data not decrypting after restart/update",id:"old-data-not-decrypting-after-restartupdate",level:2},{value:"<code>401 Unauthorized</code> on API calls",id:"401-unauthorized-on-api-calls",level:2},{value:"Rotating proxy creation fails",id:"rotating-proxy-creation-fails",level:2},{value:"Scrape source rejected as blocked",id:"scrape-source-rejected-as-blocked",level:2},{value:"Backend cannot connect to Redis/Postgres",id:"backend-cannot-connect-to-redispostgres",level:2},{value:"Build or install dependency issues",id:"build-or-install-dependency-issues",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"troubleshooting",children:"Troubleshooting"})}),"\n",(0,r.jsx)(n.h2,{id:"old-data-not-decrypting-after-restartupdate",children:"Old data not decrypting after restart/update"}),"\n",(0,r.jsxs)(n.p,{children:["Likely cause: ",(0,r.jsx)(n.code,{children:"PROXY_ENCRYPTION_KEY"})," changed."]}),"\n",(0,r.jsx)(n.p,{children:"Fix: restart with previous key."}),"\n",(0,r.jsxs)(n.h2,{id:"401-unauthorized-on-api-calls",children:[(0,r.jsx)(n.code,{children:"401 Unauthorized"})," on API calls"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Missing ",(0,r.jsx)(n.code,{children:"Authorization: Bearer <token>"})]}),"\n",(0,r.jsx)(n.li,{children:"Expired or invalid JWT"}),"\n",(0,r.jsxs)(n.li,{children:["Token created with different ",(0,r.jsx)(n.code,{children:"JWT_SECRET"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"rotating-proxy-creation-fails",children:"Rotating proxy creation fails"}),"\n",(0,r.jsx)(n.p,{children:"Possible causes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"protocol not enabled for user"}),"\n",(0,r.jsx)(n.li,{children:"name conflict"}),"\n",(0,r.jsx)(n.li,{children:"missing auth fields when auth required"}),"\n",(0,r.jsx)(n.li,{children:"no free listener ports in configured range"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"scrape-source-rejected-as-blocked",children:"Scrape source rejected as blocked"}),"\n",(0,r.jsxs)(n.p,{children:["URL appears in ",(0,r.jsx)(n.code,{children:"website_blacklist"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"backend-cannot-connect-to-redispostgres",children:"Backend cannot connect to Redis/Postgres"}),"\n",(0,r.jsx)(n.p,{children:"Check effective env values:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"redisUrl"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"DB_HOST"}),", ",(0,r.jsx)(n.code,{children:"DB_PORT"}),", ",(0,r.jsx)(n.code,{children:"DB_NAME"}),", ",(0,r.jsx)(n.code,{children:"DB_USERNAME"}),", ",(0,r.jsx)(n.code,{children:"DB_PASSWORD"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"build-or-install-dependency-issues",children:"Build or install dependency issues"}),"\n",(0,r.jsxs)(n.p,{children:["Delete ",(0,r.jsx)(n.code,{children:"node_modules"})," and lockfile in the affected workspace and reinstall."]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453(e,n,t){t.d(n,{R:()=>i,x:()=>c});var s=t(6540);const r={},o=s.createContext(r);function i(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);