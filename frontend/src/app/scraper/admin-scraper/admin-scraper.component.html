<h2 class="titleHeader">
  <mat-icon svgIcon="reality"></mat-icon>
  <div>Global Scraper Settings</div>
  <mat-icon svgIcon="reality"></mat-icon>
</h2>

<div class="content-container">
  <form [formGroup]="settingsForm">
    <mat-tab-group>
      <mat-tab label="Common">
        <h4 class="text-center subText">Check ALL scrape sites every</h4>
        <div class="form-row mb-3 d-flex justify-content-center" formGroupName="scraper_timer">
          <mat-form-field appearance="outline" class="mx-2">
            <mat-select placeholder="Days" formControlName="days">
              @for (day of daysList; track day) {
                <mat-option [value]="day">{{ day + " Days" }}</mat-option>
              }
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="outline" class="mx-2">
            <mat-select placeholder="Hours" formControlName="hours">
              @for (hour of hoursList; track hour) {
                <mat-option [value]="hour">{{ hour + " Hours" }}</mat-option>
              }
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="outline" class="mx-2">
            <mat-select placeholder="Minutes" formControlName="minutes">
              @for (min of minutesList; track min) {
                <mat-option [value]="min">{{ min + " Minutes" }}</mat-option>
              }
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="outline" class="mx-2">
            <mat-select placeholder="Seconds" formControlName="seconds">
              @for (sec of secondsList; track sec) {
                <mat-option [value]="sec">{{ sec + " Seconds" }}</mat-option>
              }
            </mat-select>
          </mat-form-field>
        </div>

        <mat-divider></mat-divider>

        <div class="form-row">
          <div class="form-group">
            <label for="threads">
              Threads
              <app-tooltip [text]="'Determines how many proxies are checked concurrently.'"></app-tooltip>
            </label>
            <input id="threads" formControlName="scraper_threads" type="number"/>
          </div>
          <div class="form-group">
            <label for="retries">Retries</label>
            <input id="retries" formControlName="scraper_retries" type="number" />
          </div>
          <div class="form-group">
            <label for="timeout">Timeout (ms)</label>
            <input id="timeout" formControlName="scraper_timeout" type="number" />
          </div>
        </div>

        <mat-divider></mat-divider>

        <div class="row mb-3 mt-3">
          <div class="col text-center checkbox-container">
            <app-checkbox
              label="Dynamic Threads"
              formControlName="scraper_dynamic_threads"
              matTooltip="Enable this option to automatically adjust the number of threads based on the available proxies and your checker settings.">
            </app-checkbox>
          </div>
        </div>
      </mat-tab>

      <mat-tab label="Sources">
        <div class="form-row">
          <div class="form-group">
            <label for="scrape_sites">Default Scrape Sites</label>
            <input id="scrape_sites" formControlName="scrape_sites" type="number" />
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </form>
</div>

<div class="d-flex align-items-center justify-content-center mt-4">
  <button
    type="submit"
    (click)="onSubmit()"
    class="button-padding"
    [disabled]="!settingsForm.dirty">
  Save Settings</button>
</div>
