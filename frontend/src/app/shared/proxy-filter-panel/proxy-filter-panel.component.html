<div class="filter-panel" [ngClass]="{'filter-panel--floating': floating}">
  <div class="filter-panel__header">
    <div>
      <div class="filter-panel__title">Filters</div>
      <div class="filter-panel__subtitle">Narrow the list by status, protocol health, or metadata.</div>
    </div>
    <div class="filter-panel__actions">
      <p-button
        label="Clear"
        styleClass="p-button-text p-button-sm"
        (onClick)="clear.emit()"
      ></p-button>
      <p-button
        label="Apply"
        styleClass="p-button-success p-button-sm"
        (onClick)="apply.emit()"
      ></p-button>
    </div>
  </div>

  <div class="filter-panel__divider" aria-hidden="true"></div>

  <form [formGroup]="form" class="filter-panel__body">
    <div class="filter-column filter-column--left">
      <div class="filter-section filter-section--top">
        <div class="filter-section__title">Protocol Alive</div>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
          <div class="flex items-center justify-center">
            <div class="filter-checkbox-row">
              <p-checkbox
                inputId="protocolHttp"
                formControlName="http"
                [binary]="true"
                class="filter-checkbox"
              ></p-checkbox>
              <label for="protocolHttp" class="filter-checkbox-label">HTTP</label>
            </div>
          </div>
          <div class="flex items-center justify-center">
            <div class="filter-checkbox-row">
              <p-checkbox
                inputId="protocolHttps"
                formControlName="https"
                [binary]="true"
                class="filter-checkbox"
              ></p-checkbox>
              <label for="protocolHttps" class="filter-checkbox-label">HTTPS</label>
            </div>
          </div>
          <div class="flex items-center justify-center">
            <div class="filter-checkbox-row">
              <p-checkbox
                inputId="protocolSocks4"
                formControlName="socks4"
                [binary]="true"
                class="filter-checkbox"
              ></p-checkbox>
              <label for="protocolSocks4" class="filter-checkbox-label">SOCKS4</label>
            </div>
          </div>
          <div class="flex items-center justify-center">
            <div class="filter-checkbox-row">
              <p-checkbox
                inputId="protocolSocks5"
                formControlName="socks5"
                [binary]="true"
                class="filter-checkbox"
              ></p-checkbox>
              <label for="protocolSocks5" class="filter-checkbox-label">SOCKS5</label>
            </div>
          </div>
        </div>
      </div>

      <div class="filter-grid mt-2.5">
        <div>
          <label for="filterTimeout" class="filter-label">Max Timeout (ms)</label>
          <p-inputNumber
            id="filterTimeout"
            formControlName="maxTimeout"
            mode="decimal"
            [showButtons]="true"
            [min]="0"
            inputStyleClass="w-full bg-gray-800 text-white border-gray-700 theme-focus"
          ></p-inputNumber>
        </div>
        <div>
          <label for="filterRetries" class="filter-label">Max Retries</label>
          <p-inputNumber
            id="filterRetries"
            formControlName="maxRetries"
            mode="decimal"
            [showButtons]="true"
            [min]="0"
            inputStyleClass="w-full bg-gray-800 text-white border-gray-700 theme-focus"
          ></p-inputNumber>
        </div>
      </div>

      <div class="filter-grid">
        <div>
          <label for="filterCountries" class="filter-label">Country</label>
          <p-multiSelect
            id="filterCountries"
            formControlName="countries"
            [options]="countryOptions"
            optionLabel="label"
            optionValue="value"
            display="chip"
            [showClear]="true"
            class="w-full"
            [appendTo]="'body'"
            [scrollHeight]="'200px'"
            [filter]="true"
            placeholder="Select countries"
          ></p-multiSelect>
        </div>
        <div>
          <label for="filterTypes" class="filter-label">Type</label>
          <p-multiSelect
            id="filterTypes"
            formControlName="types"
            [options]="typeOptions"
            optionLabel="label"
            optionValue="value"
            display="chip"
            [showClear]="true"
            class="w-full"
            [appendTo]="'body'"
            [scrollHeight]="'200px'"
            [filter]="true"
            placeholder="Select proxy types"
          ></p-multiSelect>
        </div>
      </div>
    </div>

    <div class="filter-column filter-column--right">
      <div class="filter-grid">
        <div>
          <label for="filterStatus" class="filter-label">Overall Status</label>
          <p-select
            id="filterStatus"
            formControlName="proxyStatus"
            [options]="proxyStatusOptions"
            optionLabel="label"
            optionValue="value"
            class="w-full"
            panelStyleClass="bg-gray-800 text-white"
            [appendTo]="'body'"
            [scrollHeight]="'200px'"
          ></p-select>
        </div>

        <div>
          <label for="filterReputation" class="filter-label">Reputation</label>
          <p-multiSelect
            id="filterReputation"
            formControlName="reputationLabels"
            [options]="proxyReputationOptions"
            optionLabel="label"
            optionValue="value"
            display="chip"
            [showClear]="true"
            class="w-full"
            [appendTo]="'body'"
            [scrollHeight]="'200px'"
            [filter]="true"
            placeholder="Select reputation labels"
          ></p-multiSelect>
        </div>
      </div>

      <div class="filter-grid">
        <div>
          <label for="filterAnonymity" class="filter-label">Anonymity</label>
          <p-multiSelect
            id="filterAnonymity"
            formControlName="anonymityLevels"
            [options]="anonymityOptions"
            optionLabel="label"
            optionValue="value"
            display="chip"
            [showClear]="true"
            class="w-full"
            [appendTo]="'body'"
            [scrollHeight]="'200px'"
            [filter]="true"
            placeholder="Select anonymity levels"
          ></p-multiSelect>
        </div>
      </div>
    </div>
  </form>
</div>
